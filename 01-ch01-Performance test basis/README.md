## 性能测试基础
### 定义
>性能测试是通过自动化的测试工具模拟多种正常、峰值以及异常负载条件来对系统的各项性能指标进行测试。负载测试和压力测试都属于性能测试，两者可以结合进行。通过负载测试，确定在各种工作负载下系统的性能，目标是测试当负载逐渐增加时，系统各项性能指标的变化情况。压力测试是通过确定一个系统的瓶颈或者不能接受的性能点，来获得系统能提供的最大服务级别的测试。
### 目的
* 评估系统的能力，测试中得到的负荷和响应时长数据可以被用于验证所计划模型的能力，并帮助做出决策。
* 识别体系中的弱点：受控的负荷可以被增加到一个极端的水平，并突破它，从而修复体系的瓶颈或薄弱的地方。
* 系统调优：重复运行测试，验证调整系统的活动得到了预期的结果，从而改进性能。
* 检测软件中的问题：长时间的测试执行可导致程序发生由于内存泄露引起的失败，揭示程序中隐含的问题或冲突。
* 验证稳定性（resilience）和可靠性（reliability）：在一个生产负荷下执行测试一定的时间是评估系统稳定性和可靠性是否满足要求的唯一方法。
### 分类
* 负载测试：确定在各种工作负载下系统的性能，目标是测试当负载逐渐增加时，系统各项性能指标的变化情况
* 压力测试：通过确定一个系统的瓶颈或者不能接受的性能点，来获得系统能提供的最大服务级别的测试
* 容量测试：确定系统可处理最大在线用户数
### 性能测试常见指标
#### B/S架构的软件，一般关注如下服务器性能指标
Avg Rps：平均每秒钟的响应次数 ＝ 总请求次数/秒数；

Avg time to last byte per tertian（mstes）：平均每秒业务脚本的迭代次数；

Successful Rounds：成功的请求；

Failed Rounds：失败的请求；

Hits Per Second：每秒点击次数；

Successful Hits Per Second：每秒成功的点击次数；

Failed Hits Per Second：每秒失败的点击数；

Attempted Connections：尝试连接数；

Throughput：吞吐率。吞吐率在性能测试中指单位时间内在网络上传输的数据量。是衡量网络性能的主要指标
#### C/S架构的程序，一般软件后台通常为数据库，所以我们更注重数据库的测试指标
User Connections：用户连接数，也就是数据库的连接数量；

Number of Deadlocks：数据库死锁；

Butter Cache Hit：数据库Cache的命中情况。

在实际性能测试过程中，需要观察的性能指标并不限于以上提到的这些，需要根据实际情况做出选择和权衡，有些指标如cpu占用率／内存占用率／数据库连接池，也有非常重要的参考意义。

